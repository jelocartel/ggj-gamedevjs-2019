(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(30)},18:function(e,t,n){},25:function(e,t){AFRAME.registerComponent("car-audio",{schema:{sound:{type:"string",default:"sounds/default.mp3"},loop:{default:!0}},init:function(){this.mySound=new Audio(this.data.sound),this.mySound.loop=this.data.loop},tick:function(e,t){var n=Math.abs(this.el.getAttribute("velocity"));n>.3?(this.mySound.play(),this.mySound.volume=3*n/100):this.mySound.pause()}})},26:function(e,t){AFRAME.registerComponent("camera-movment",{schema:{},init:function(){this.ratio=window.innerWidth/window.innerHeight,this.cars=document.querySelectorAll(".car"),this.offset=1.75},tick:function(){var e=new THREE.Box3,t=new THREE.Group;this.cars.forEach(function(e){t.add(e.object3D.clone())}),e.setFromObject(t);e.getCenter();var n=e.getSize(),a=Math.max(n.x,n.y,n.z),i=Math.PI/180*80;Math.tan(2*i)}}),e.exports={tick:function(){window.innerWidth,window.innerHeight;var e=document.querySelectorAll(".car"),t=this.el.children[0].object3D.children[0],n=new THREE.Box3,a=new THREE.Group;e.forEach(function(e){a.add(e.object3D.clone())}),n.setFromObject(a);var i=n.getCenter(),o=n.getSize(),r=Math.max(o.x,o.y,o.z),s=t.fov*(Math.PI/180),l=r/4/Math.tan(2*s);t.position.z=l,t.updateProjectionMatrix(),t.lookAt(i)}}},28:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(6),r=n.n(o),s=(n(18),n(7)),l=n(8),c=n(10),u=n(9),d=n(11),h=n(1),m=(n(3),function(e){return i.a.createElement(h.Entity,Object.assign({rotation:{x:-30,y:45,z:0},position:{x:120,y:120,z:120},"camera-movment":!0},e),i.a.createElement(h.Entity,{camera:"active: true; fov: 30","data-aframe-default-camera":!0,near:"0.001"}))}),y=(n(4),function(e){return i.a.createElement("div",null,i.a.createElement("h1",null,"Samochodziki i ma\u0142e robociki"),i.a.createElement(h.Scene,null,i.a.createElement("a-assets",null,i.a.createElement("a-asset-item",{id:"model-car1blue",src:"./car1blue.glb"})),i.a.createElement(m,{position:{x:6.88,y:.96,z:-6.7},rotation:{x:3.5,y:128.5,z:0}}),i.a.createElement(h.Entity,{"gltf-model":"#model-car1blue",position:{x:0,y:0,z:0}})),i.a.createElement("button",{onClick:e.click},"Start"))}),p=function(e){var t=e.players.length;return i.a.createElement("div",{className:"page"},i.a.createElement("h1",null,"Start Game"),i.a.createElement("p",null,"Choose numbers of players"),i.a.createElement("form",null,i.a.createElement("label",{className:1===t?"radio chosen":"radio"},i.a.createElement("input",{type:"radio",name:"playersNumber",value:"1",checked:1===t,onChange:e.playersNumber}),"1"),i.a.createElement("label",{className:2===t?"radio chosen":"radio"},i.a.createElement("input",{type:"radio",name:"playersNumber",value:"2",checked:2===t,onChange:e.playersNumber}),"2"),i.a.createElement("label",{className:3===t?"radio chosen":"radio"},i.a.createElement("input",{type:"radio",name:"playersNumber",value:"3",checked:3===t,onChange:e.playersNumber}),"3"),i.a.createElement("label",{className:4===t?"radio chosen":"radio"},i.a.createElement("input",{type:"radio",name:"playersNumber",value:"4",checked:4===t,onChange:e.playersNumber}),"4")),i.a.createElement("form",null,e.players.map(function(t,n){return i.a.createElement("div",{key:n,className:"car-label"},i.a.createElement("label",null,"Car for player ",n+1,":"),i.a.createElement("select",{value:t,onChange:function(t){return e.setCar(n,t)}},i.a.createElement("option",{value:"cyan"},"cyan"),i.a.createElement("option",{value:"magenta"},"magenta"),i.a.createElement("option",{value:"blue"},"blue"),i.a.createElement("option",{value:"yellow"},"yellow")))})),i.a.createElement("button",{onClick:e.start},"Start Game"))},f=n(12);function E(e,t,n,a,i){return(e-t)*(i-a)/(n-t)+a}var v=Object.assign(function(){},{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16});function b(e,t,n){this.type=e,this.index=t,this.pressed=n.pressed,this.value=n.value}AFRAME.registerComponent("gamepad-controls",{GamepadButton:v,schema:{controller:{default:0,oneOf:[0,1,2,3]},enabled:{default:!0},movementEnabled:{default:!0},lookEnabled:{default:!0},flyEnabled:{default:!1},invertAxisY:{default:!1},turnSpeed:{default:Math.PI/4},easing:{default:20},acceleration:{default:65},sensitivity:{default:.04},pitchAxis:{default:"x",oneOf:["x","y","z"]},yawAxis:{default:"y",oneOf:["x","y","z"]},rollAxis:{default:"z",oneOf:["x","y","z"]}},init:function(){this.position={},this.velocity=new THREE.Vector3,this.buttons={},this.getGamepad()||console.warn("Gamepad #%d not found. Connect controller and press any button to continue.",this.data.controller)},tick:function(e,t){this.updatePosition(t/1e3),this.updateButtonState()},updatePosition:function(e){var t=this.data,n=t.acceleration,a=t.easing,i=this.velocity,o=t.rollAxis,r=t.pitchAxis,s=this.el,l=this.getGamepad();if(e>.2)return i[o]=0,void(i[r]=0);0!==i[o]&&(i[o]-=i[o]*a*e,Math.abs(i[o])<.001&&(i[o]=0));var c=s.getAttribute("position");if(t.enabled&&t.movementEnabled&&l){var u=this.getDpad().x||this.getJoystick(0).x,d=this.getGamepad(),h=d.buttons[v.FACE_1].pressed||0,m=d.buttons[v.FACE_2].pressed||0;if(i[o]-=h*n*e,i[o]+=m*n*e,Math.abs(u)>.2){var y=E(Math.abs(i[o]),0,t.acceleration/t.easing,1.2,.9);y>1.16&&(y=0),this.el.object3D.rotation.y-=u*y*t.turnSpeed*e}}var p=this.getMovementVector(e),f=s.getAttribute("position");c.x=f.x+p.x,c.y=f.y+p.y,c.z=f.z+p.z,s.setAttribute("position",c)},getMovementVector:function(){var e=new THREE.Vector3(0,0,0),t=new THREE.Euler(0,0,0,"YXZ");return function(n){var a,i=this.el.getAttribute("rotation"),o=this.velocity;return this.el.setAttribute("velocity",this.velocity[this.data.rollAxis]),e.copy(o),e.multiplyScalar(n),i?(a=this.data.fly?i.x:0,t.set(THREE.Math.degToRad(a),THREE.Math.degToRad(i.y),0),e.applyEuler(t),e):e}}(),updateButtonState:function(){var e=this.getGamepad();if(this.data.enabled&&e)for(var t=0;t<e.buttons.length;t++)e.buttons[t].pressed&&!this.buttons[t]?this.emit(new b("gamepadbuttondown",t,e.buttons[t])):!e.buttons[t].pressed&&this.buttons[t]&&this.emit(new b("gamepadbuttonup",t,e.buttons[t])),this.buttons[t]=e.buttons[t].pressed;else Object.keys(this.buttons)&&(this.buttons={})},emit:function(e){this.el.emit(e.type,e),this.el.emit(e.type+":"+e.index,new b(e.type,e.index,e))},getGamepad:function(){var e=navigator.getGamepads&&Array.from(navigator.getGamepads()).filter(Boolean).filter(function(e){return"x"===e.id[0].toLowerCase()})[this.data.controller],t=this.el.sceneEl.components["proxy-controls"];return t&&t.isConnected()&&t.getGamepad(this.data.controller)||e},getButton:function(e){return this.getGamepad().buttons[e]},getAxis:function(e){return this.getGamepad().axes[e]},getJoystick:function(e){var t=this.getGamepad();switch(e){case 0:return new THREE.Vector2(t.axes[0],t.axes[1]);case 1:return new THREE.Vector2(t.axes[2],t.axes[3]);default:throw new Error('Unexpected joystick index "%d".',e)}},getDpad:function(){var e=this.getGamepad();return e.buttons[v.DPAD_RIGHT]?new THREE.Vector2((e.buttons[v.DPAD_RIGHT].pressed?1:0)+(e.buttons[v.DPAD_LEFT].pressed?-1:0),(e.buttons[v.DPAD_UP].pressed?-1:0)+(e.buttons[v.DPAD_DOWN].pressed?1:0)):new THREE.Vector2},isConnected:function(){var e=this.getGamepad();return!(!e||!e.connected)},getID:function(){return this.getGamepad().id}});var g=["w","a","s","d","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];AFRAME.registerComponent("keyboard-controls",{schema:{acceleration:{default:65},turnSpeed:{default:Math.PI/4},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},easing:{default:20},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.position={},this.velocity=new THREE.Vector3,this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(e,t){var n,a,i=this.data,o=this.el,r=this.position,s=this.velocity;(s[i.adAxis]||s[i.wsAxis]||!function(e){var t;for(t in e)return!1;return!0}(this.keys))&&(t/=1e3,this.updateVelocity(t),(s[i.adAxis]||s[i.wsAxis])&&(n=o.getAttribute("position"),a=this.getMovementVector(t),r.x=n.x+a.x,r.y=n.y+a.y,r.z=n.z+a.z,o.setAttribute("position",r)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(e){var t,n,a,i,o,r=this.data,s=this.keys,l=this.velocity;if(n=r.adAxis,i=r.wsAxis,e>.2)return l[n]=0,void(l[i]=0);if(0!==l[n]&&(l[n]-=l[n]*r.easing*e),0!==l[i]&&(l[i]-=l[i]*r.easing*e),Math.abs(l[n])<.001&&(l[n]=0),Math.abs(l[i])<.001&&(l[i]=0),r.enabled&&(t=r.acceleration,r.wsEnabled&&(o=r.wsInverted?-1:1,(s.w||s.ArrowUp)&&(l[i]-=o*t*e),(s.s||s.ArrowDown)&&(l[i]+=o*t*e)),r.adEnabled)){var c=E(Math.abs(l[i]),0,r.acceleration/r.easing,1.2,.9);c>1.16&&(c=0),a=r.adInverted?-1:1,(s.a||s.ArrowLeft)&&(this.el.object3D.rotation.y+=a*c*r.turnSpeed*e),(s.d||s.ArrowRight)&&(this.el.object3D.rotation.y-=a*c*r.turnSpeed*e)}},getMovementVector:function(){var e=new THREE.Vector3(0,0,0),t=new THREE.Euler(0,0,0,"YXZ");return function(n){var a,i=this.el.getAttribute("rotation"),o=this.velocity;return e.copy(o),e.multiplyScalar(n),i?(a=this.data.fly?i.x:0,t.set(THREE.Math.degToRad(a),THREE.Math.degToRad(i.y),0),e.applyEuler(t),e):e}}(),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(e){if(e.metaKey||document.activeElement!==document.body)return!1;-1!==g.indexOf(e.key)&&(this.keys[e.key]=!0)},onKeyUp:function(e){delete this.keys[e.key]}});n(25);var w={acceleration:100,easing:3,turnSpeed:Math.PI};function x(e){var t=e.index,n=e.player,a=e.checkWaypoint;return i.a.createElement(h.Entity,{class:"car","aabb-collider":"objects: .waypoint",key:t,"gltf-model":"#model-car1".concat(n),"keyboard-controls":w,position:{x:0+4*t,y:0,z:0},"gamepad-controls":Object(f.a)({controller:t,lookEnabled:!1},w),"car-audio":{sound:"sounds/car"+(t+1)+".mp3"},events:{hitclosest:function(e){var t=e.detail.el.id.split("_")[1],n=e.target.id;a(t,n)}},id:t})}function A(){return i.a.createElement(h.Entity,{"gltf-model":"url(./map1.glb)",position:{x:0,y:0,z:0}})}n(26),n(27);var k=function(e){var t={};e.players.forEach(function(e,n){t[n]=[]});var n=[];e.players.forEach(function(e,t){n[t]=0});var a=function(a,i){var o=t[i];"1"===a&&(3===o.length&&(console.log(" full track !!!"),n[i]=n[i]+1),o.length=0,o[0]="1",t[i]=o),o.includes(a)||(o.push(a),t[i]=o),e.setResults(n)};return i.a.createElement(h.Scene,null,i.a.createElement("a-assets",null,i.a.createElement("a-asset-item",{id:"model-car1blue",src:"./car1blue.glb"}),i.a.createElement("a-asset-item",{id:"model-car1cyan",src:"./car1cyan.glb"}),i.a.createElement("a-asset-item",{id:"model-car1magenta",src:"./car1magenta.glb"}),i.a.createElement("a-asset-item",{id:"model-car1yellow",src:"./car1yellow.glb"})),i.a.createElement(m,null),i.a.createElement(A,null),e.players.map(function(e,t){return i.a.createElement(x,{key:t,index:t,player:e,checkWaypoint:a})}),i.a.createElement(h.Entity,{class:"waypoint",geometry:{primitive:"box",height:"1",width:"10",depth:"1"},material:{visible:!1},position:{x:2.1,y:0,z:.3},scale:{x:2.1,y:1,z:1},id:"waypoint_1"}),i.a.createElement(h.Entity,{class:"waypoint",geometry:{primitive:"box",height:"1",width:"10",depth:"1"},material:{visible:!1},position:{x:18,y:0,z:-36},rotation:{x:90,y:90,z:0},scale:{x:2.2,y:1,z:1},id:"waypoint_2"}),i.a.createElement(h.Entity,{class:"waypoint",geometry:{primitive:"box",height:"1",width:"10",depth:"1"},material:{visible:!1},position:{x:-50,y:0,z:-30},scale:{x:3.6,y:1,z:1},id:"waypoint_3"}))},R=(n(28),["cyan","magenta","blue","yellow"]),C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={activePage:1,playersCars:["cyan"],results:[]},n.myRef=i.a.createRef(),n.nextPageHandler=function(e){n.setState({activePage:e})},n.setNumberOfPlayersHandler=function(e){var t=parseInt(e.target.value);n.setState({playersCars:R.slice(0,t)})},n.setCarHandler=function(e,t){var a=n.state.playersCars;a[e]=t.target.value,n.setState({playersCars:a})},n.setResults=function(e){var t=e.map(function(e,t){return{number:t,points:e}});t=t.sort(function(e,t){return parseInt(t.points)-parseInt(e.points)}),n.myRef.current.childNodes.forEach(function(e,n){e.innerHTML="player ".concat(t[n].number," : ").concat(t[n].points)})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return 1===this.state.activePage?i.a.createElement(y,{click:this.nextPageHandler.bind(this,2)}):2===this.state.activePage?i.a.createElement(p,{start:this.nextPageHandler.bind(this,3),playersNumber:this.setNumberOfPlayersHandler,players:this.state.playersCars,setCar:this.setCarHandler}):3===this.state.activePage?i.a.createElement("div",null,i.a.createElement("div",{ref:this.myRef,class:"highscore"},new Array(this.state.playersCars.length).fill("1").map(function(e,t){return i.a.createElement("p",{key:t},"player ",t)})),i.a.createElement(k,{players:this.state.playersCars,setResults:this.setResults})):void 0}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},4:function(e,t,n){}},[[13,2,1]]]);
//# sourceMappingURL=main.00cc5bba.chunk.js.map